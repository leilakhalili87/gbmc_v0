
# ------------------Variables ---------------------
# Minimization Parameters -------------------------
variable Etol equal 1e-25
variable Ftol equal 1e-25
variable MaxIter equal 5000
variable MaxEval equal 10000
variable Infn equal -10000000000
variable Inf equal 10000000000
 
# ------------------------------------------------
variable LatParam equal 4.05
  
# ------------------------------------------------
variable GBname index /home/leila/Leila_sndhard/codes/gbmc_python/gbmc_v0/gbmc_v0/gbmc_v0/in.minimize
variable cnt equal 1
  
# ------------------------------------------------
variable OverLap equal 1.43


# ---------- Deletion Criterion --------------
#variable e equal 1


# -----------Initializing the Simulation-----------
clear
units metal
dimension 3
boundary p p f
atom_style atomic

# ---------Creating the Atomistic Structure--------
lattice fcc ${LatParam}
region whole prism -1.61864957e-15  2.97002515e+01 0.00000000e+00  2.23668561e+01 -1.01250000e+02  1.01250000e+02 7.33339543e+00 -1.61864957e-15 1.08925055e-15
create_box 2 whole

region lower prism -1.61864957e-15  2.97002515e+01 0.00000000e+00  2.23668561e+01 -1.01250000e+02  0.0 7.33339543e+00 -1.61864957e-15 1.08925055e-15

region upper prism -1.61864957e-15  2.97002515e+01 0.00000000e+00  2.23668561e+01 0.0 1.01250000e+02 7.33339543e+00 -1.61864957e-15 1.08925055e-15

group lower type 2
group upper type 1


read_dump /home/leila/Leila_sndhard/codes/gbmc_python/gbmc_v0/gbmc_v0/gbmc_v0/tests/data/dump_1 0 x y z box yes add yes 

# -------Defining the potential functions----------
pair_style eam/alloy
pair_coeff * * Al99.eam.alloy Al Al

#delete_atoms overlap ${OverLap}  all all
delete_atoms overlap ${OverLap}  upper lower

neighbor 2 bin
neigh_modify delay 10 check yes

# ---------Computing Simulation Parameters---------
compute csym all centro/atom fcc
compute eng all pe/atom
compute eatoms all reduce sum c_eng
compute MinAtomEnergy all reduce min c_eng

# ------1st Minimization:Relaxing the bi-crystal------
reset_timestep 0
thermo 10
thermo_style custom step pe lx ly lz xy xz yz xlo xhi ylo yhi zlo zhi press pxx pyy pzz c_eatoms c_MinAtomEnergy
thermo_modify lost ignore
dump 1 all custom 10 dump0.${cnt} id type x y z c_csym c_eng
min_style cg
minimize ${Etol} ${Ftol} ${MaxIter} ${MaxEval}
undump 1
# -----------------Dumping Outputs-----------------
reset_timestep 0
timestep 0.001
thermo 10
thermo_style custom step pe lx ly lz press pxx pyy pzz c_eatoms
thermo_modify lost ignore
dump 1 all custom 10 dump.${cnt} id type x y z c_csym c_eng
run 0
undump 1



