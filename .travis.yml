language: python
python:
  - 3.6
cache:
  directories:
    - $HOME/.cache/pip
    - $HOME/.ccache  


env:
  global:
    # Doctr deploy key for leilakhalili87/gbmc_v0
    - secure: "tr/MmgYw3pMwe2kjiYVyM/XQiZi1hOtWgtuiA6UmemHBhJR1GWHB6F2gDYmeFxCDS5ukSPAIpf3zdhXQnVwHI9+HtivtSCoARtiIVp87MEShRQC13j3qDJeDBUlsprLsyoIR3ju+b3pd0NwV5l69zxC1dpVCtM78Ab9zxvWtvrnP4duYAFA/AAsWPvojme3hUxjL1aoUstyKJKuQt+RPQx2hdQVRPP3T0iH5m8OLGK+Woohin/mF4h2i8etg7DC/xJ5SEj91eYlkJXlAclTNahQ7xsBuOc6vv/WczFxUnHsODY36HdwwSswvoA4nw9P2rmkndNKTjLUl1MTsrtlbas7mjc0UQL9cE2rE8gjzatIOjMUGO+Ab9C4i6XmpZpLwaX+jvmSrcSnT69hV+Nn+OXr9DJinNt6H2tjAE/ApOx2vRUNVREsL3T9SkIIkMCrKX0L5krAVZu2iqr0ctcrykELPNPoObbn16aUVMN80gmFcGSQPjdWBEdW9emZ81Sd8dVwj+B+JkwhtxLqQAPlNO0exQsnjTc5xEmoKWOS7Ujb65qppMv7VQnP9dXoLPdkQ/a8NKohpzf2yO202wZEFywHLJhuy72XLCbYSr9H0LCHMz630HGy0gHNhDjLeo5lhJEaPC+xHpZeFEOP3Z7fxieFCdFPjhp0cZLriNgDFryE="

install:
  # Install this package and the packages listed in requirements.txt.
  - pip install .
  # Install extra requirements for running tests and building docs.
  - pip install -r requirements-dev.txt

script:
  - coverage run -m pytest  # Run the tests and check for test coverage.
  - coverage report -m  # Generate test coverage report.
  - codecov  # Upload the report to codecov.
  - flake8  # Enforce code style ('relaxed' line length limit is set in .flake8 config file).
  - set -e
  - make -C docs html  # Build the documentation.
  - pip install doctr
  - doctr deploy --built-docs docs/build/html .